[general]
ui = TTYUI
metadata = ~/.offlineimap
pythonfile = ~/.offlineimap.py
accounts = Google
maxsyncaccounts = 2
fsync = false

[Account Google]
localrepository = Local
remoterepository = Gmail
synclabels = yes
labelsheader = X-Label
ignorelabels = \Inbox, \Starred, \Sent, \Draft, \Spam, \Trash, \Important
autorefresh = 2
quick = 10
# https://gist.github.com/mavam/298d8d181e4c0b33b7a4
postsynchook = maildir-notifier ~/.mail/INBOX

[Repository Local]
type = GmailMaildir
localfolders = ~/.mail
sep = /
nametrans = lambda folder: {'gmail/drafts':   '[Gmail]/Drafts',
                            'gmail/sent':     '[Gmail]/Sent Mail',
                            'gmail/spam':     '[Gmail]/Spam',
                            'gmail/flagged':  '[Gmail]/Starred',
                            'gmail/trash':    '[Gmail]/Trash',
                            'gmail/archive':  '[Gmail]/All Mail',
                            }.get(folder, folder)


[Repository Gmail]
type = Gmail
sslcacertfile = ~/.offlineimap.certs.pem
maxconnections = 1
realdelete = no
remoteuser = matthias@vallentin.net
remotepasseval = get_keychain_pass('offlineimap')
nametrans = lambda folder: {'[Gmail]/Drafts':    'gmail/drafts',
                            '[Gmail]/Sent Mail': 'gmail/sent',
                            '[Gmail]/Starred':   'gmail/flagged',
                            '[Gmail]/Spam':      'gmail/spam',
                            '[Gmail]/Trash':     'gmail/trash',
                            '[Gmail]/All Mail':  'gmail/archive',
                            }.get(folder, folder)
folderfilter = lambda folder: folder not in ['[Gmail]/Important',
#                                             'logs',
                                             ]

# Generate a file listing all mailboxes for mutt. 
[mbnames]
enabled = yes
filename = ~/.mutt/mailboxes
# Enumerating all Gmail mailboxes at the top is a lazy way to adjust the
# mailbox order. The right way would be to use the option *sort_keyfunc* and
# pass it Python lambda that does the sorting.
#sort_keyfunc = lambda d: (d['accountname'], d['foldername'])
header = "mailboxes +INBOX +gmail/sent +gmail/flagged +gmail/drafts +gmail/archive +gmail/trash +gmail/spam\nmailboxes "
peritem = "+%(foldername)s"
sep = "\nmailboxes "
footer = "\n"

# vim: ft=cfg tw=0
